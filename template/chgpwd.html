<!--修改密码-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">


    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap -->
    <title>修改密码</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="http://code.jquery.com/jquery-1.8.0.js"></script>
    <link href="{{static_url('./login.css')}}" rel="stylesheet">
</head>
<body>
<header class="container">
    <div class="row">
        <div class="col-md-12 ">
            <form id ='theform'method="post" action="" class="col-md-6 col-xs-6  form-horizontal center-block">
              <div class="form-group">
                <label for="pre_pwd" class="col-sm-2 control-label">旧密码</label>
                <div class="col-sm-10">
                  <input type="text" class="form-control" id="pre_pwd" name="pre_pwd"placeholder="旧密码">
                </div>
              </div>
              <div class="form-group">
                <label for="new_pwd" class="col-sm-2 control-label">新密码</label>
                <div class="col-sm-10">
                  <input type="password" class="form-control" id="new_pwd" name="new_pwd"placeholder="新密码">
                </div>
              </div>
                <div id="Name" class="form-group" >
                <label for="confirm_pwd" class="col-sm-2 control-label">确认密码</label>
                <div class="col-sm-10">
                  <input type="password" class="form-control" id="confirm_pwd" name="Password"placeholder="确认密码">
                </div>
              </div>


              <div class="form-group row">
                <div class="col-sm-offset-2 col-sm-3">
                  <button id="confirm"type="button" formmethod="post" class="btn btn-default">confirm</button>

                </div>
                  <div class="col-sm-offset-2 col-sm-3">
                  <button id="index_page"type="button" class="btn btn-default">返回首页</button>
                </div>
              </div>

            </form>
            </div>
    </div>
</header>
<script>
var confirm=document.getElementById('confirm');
var pre_pwd=document.getElementById('pre_pwd');
var new_pwd=document.getElementById('new_pwd');
var confirm_pwd=document.getElementById('confirm_pwd');
var index_page=document.getElementById('index_page');
index_page.onclick=()=>{

window.location="/";

}
confirm.onclick=()=>{

    if(pre_pwd.value==""||new_pwd.value==""||confirm_pwd.value==""||confirm_pwd.value!=new_pwd.value){
        alert('输入不符合要求,请检查你的密码输入是否有误')
        return ;
    }
    else{
    var data={};
    data['pre_pwd']=pre_pwd.value;
    data['new_pwd']=new_pwd.value;

         $.ajax({
           type: "post",
           url: "/chgpwd",
           data: data,
       }).success(function(e) {

         console.log(e.data)
            if(e.data=='修改密码成功'){
            alert(e.data)
                window.location="/login";//修改密码成功，重新登录
            }else{
                alert(e.data)
            }
       }).fail(function(err){
         console.log(err)
       })

    }

}
</script>


 <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
    <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
<!--    <script src="{{static_url('./login.js')}}" ></script>-->
</body>
</html>